{
  "id": "counsel-edge-user-edit-name-validation",
  "name": "이름 필드 유효성 검증 (한영 혼합, 자모)",
  "type": "test",
  "requiresAuth": true,
  "variables": [
    "baseUrl",
    "entryType",
    "userId",
    "userName",
    "userPhone",
    "userBirthDate",
    "userGender"
  ],
  "defaults": {
    "entryType": "OTHER"
  },
  "precondition": "유저 프로필에 성별 정보가 있는 상태",
  "description": "정보 수정 → 한영 혼합 이름 → 에러 → 자모 이름 → 에러",
  "steps": [
    {
      "action": "loadState",
      "description": "저장된 인증 상태 로드"
    },
    {
      "action": "setSessionStorage",
      "key": "__instech_counsel_entry__",
      "value": "{{entryType}}",
      "description": "EntryType 설정"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}/counsel/topics",
      "description": "상담 주제 선택 페이지로 이동"
    },
    {
      "action": "waitForNavigation",
      "description": "페이지 로딩 대기"
    },
    {
      "action": "fetchAndInjectUserInfo",
      "store": "COUNSEL",
      "userData": {
        "userId": "{{userId}}",
        "name": "{{userName}}",
        "phoneNumber": "{{userPhone}}",
        "birthDate": "{{userBirthDate}}",
        "gender": "{{userGender}}"
      },
      "description": "유저 정보를 store에 주입"
    },
    {
      "action": "click",
      "selector": "input[type='checkbox']",
      "description": "첫 번째 주제 선택"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "click",
      "selector": "button:has-text('다음')",
      "description": "'다음' 클릭 (주제)"
    },
    {
      "action": "waitForNavigation",
      "description": "상담 방식 선택 페이지 로딩 대기"
    },
    {
      "action": "click",
      "selector": "button:has-text('다음')",
      "description": "'다음' 클릭 (방식 — 만나서 상담 기본 선택)"
    },
    {
      "action": "waitForTimeout",
      "timeout": 1000
    },
    {
      "action": "waitFor",
      "selector": "button:has-text('확인했어요')",
      "state": "visible",
      "description": "정보 확인 바텀시트 대기"
    },
    {
      "action": "click",
      "selector": "button:has-text('정보 수정')",
      "description": "'정보 수정' 클릭"
    },
    {
      "action": "waitForNavigation",
      "description": "정보 수정 페이지 로딩 대기"
    },
    {
      "action": "screenshot",
      "description": "정보 수정 페이지 초기 상태"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='이름']",
      "value": "",
      "description": "이름 필드 초기화"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='이름']",
      "value": "김John",
      "description": "한영 혼합 이름 입력"
    },
    {
      "action": "blur",
      "selector": "input[placeholder='이름']",
      "description": "이름 필드 blur"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "expect",
      "type": "visible",
      "selector": ":text('올바른 이름을 입력해 주세요'), :text('한글 또는 영문 이름을 입력해 주세요')",
      "description": "한영 혼합 이름 에러 메시지 확인"
    },
    {
      "action": "screenshot",
      "description": "한영 혼합 이름 에러"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='이름']",
      "value": "",
      "description": "이름 필드 초기화"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='이름']",
      "value": "김ㄱ",
      "description": "자모 포함 이름 입력"
    },
    {
      "action": "blur",
      "selector": "input[placeholder='이름']",
      "description": "이름 필드 blur"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "expect",
      "type": "visible",
      "selector": ":text('올바른 이름을 입력해 주세요'), :text('한글 또는 영문 이름을 입력해 주세요')",
      "description": "자모 이름 에러 메시지 확인"
    },
    {
      "action": "screenshot",
      "description": "자모 이름 에러"
    }
  ],
  "category": "edge"
}
