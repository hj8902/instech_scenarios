{
  "id": "counsel-edge-schedule-ga-unavailable",
  "name": "일정 선택 후 GA 컨설턴트 없음",
  "type": "test",
  "requiresAuth": true,
  "variables": [
    "baseUrl",
    "entryType"
  ],
  "defaults": {
    "entryType": "OTHER"
  },
  "precondition": "선택한 지역에 배정 가능한 GA 컨설턴트가 없는 상태 (E000001)",
  "description": "일정 선택 → 지역/시간 선택 → 다음 → GA 없음 모달",
  "steps": [
    {
      "action": "loadState",
      "description": "저장된 인증 상태 로드"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}",
      "description": "세션 스토리지 설정을 위해 기본 페이지로 이동"
    },
    {
      "action": "setSessionStorage",
      "key": "__instech_counsel_entry__",
      "value": "{{entryType}}",
      "description": "EntryType 설정"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}/counsel/topics",
      "description": "앱 로드"
    },
    {
      "action": "waitForNavigation",
      "description": "페이지 로딩 대기"
    },
    {
      "action": "fetchAndInjectUserInfo",
      "store": "COUNSEL",
      "description": "유저 정보 주입"
    },
    {
      "action": "injectStoreData",
      "store": "COUNSEL",
      "data": {
        "topics": [
          {
            "id": 1
          }
        ]
      },
      "description": "토픽 데이터 주입 (가드 통과용)"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}/counsel/schedule",
      "description": "일정 선택 페이지로 직접 이동"
    },
    {
      "action": "waitForNavigation",
      "description": "페이지 로딩 대기"
    },
    {
      "action": "click",
      "selector": ":text('편한 지역을 선택해주세요')",
      "description": "지역 선택"
    },
    {
      "action": "waitForTimeout",
      "timeout": 1000
    },
    {
      "action": "click",
      "selector": ":text('서울')",
      "description": "'서울' 선택"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "click",
      "selector": ":text('강남구')",
      "description": "'강남구' 선택"
    },
    {
      "action": "waitForTimeout",
      "timeout": 2000,
      "description": "용량 확인 대기"
    },
    {
      "action": "click",
      "selector": "button:has-text('시간 상관없음')",
      "description": "시간대 선택"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "click",
      "selector": "button:has-text('다음')",
      "description": "'다음' 클릭"
    },
    {
      "action": "waitForTimeout",
      "timeout": 3000,
      "description": "GA 조회 대기"
    },
    {
      "action": "waitFor",
      "selector": "button:has-text('상담 방식 다시 고르기')",
      "state": "visible",
      "description": "GA 제한 모달 대기"
    },
    {
      "action": "screenshot",
      "description": "GA 제한 모달 스크린샷"
    }
  ],
  "category": "edge"
}
