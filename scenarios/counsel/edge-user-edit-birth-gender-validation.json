{
  "id": "counsel-edge-user-edit-birth-gender-validation",
  "name": "생년월일/성별 유효성 검증 (존재하지 않는 날짜, 불일치)",
  "type": "test",
  "category": "edge",
  "requiresAuth": true,
  "variables": [
    "baseUrl"
  ],
  "precondition": "유저 프로필에 성별 정보가 있는 상태",
  "description": "정보 수정 → 존재하지 않는 생년월일 → 에러 → 생년월일-성별 불일치 → 에러",
  "steps": [
    {
      "action": "loadState",
      "description": "저장된 인증 상태 로드"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}/counsel/topics",
      "description": "앱 로드"
    },
    {
      "action": "waitForNavigation",
      "description": "페이지 로딩 대기"
    },
    {
      "action": "fetchAndInjectUserInfo",
      "store": "COUNSEL",
      "description": "유저 정보 주입"
    },
    {
      "action": "setSessionStorage",
      "key": "__instech_counsel_entry__",
      "value": "OTHER",
      "description": "EntryType 설정"
    },
    {
      "action": "navigate",
      "url": "{{baseUrl}}/counsel/user-edit/Phone",
      "description": "정보 수정 페이지로 직접 이동 (Phone)"
    },
    {
      "action": "waitForNavigation",
      "description": "페이지 로딩 대기"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='생년월일']",
      "value": "900230",
      "description": "존재하지 않는 생년월일 입력 (2월30일)"
    },
    {
      "action": "fill",
      "selector": "input[aria-label='주민등록번호 뒷자리 첫 번째 숫자']",
      "value": "1",
      "description": "성별 코드 입력"
    },
    {
      "action": "blur",
      "selector": "input[aria-label='주민등록번호 뒷자리 첫 번째 숫자']",
      "description": "성별 필드 blur"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "expect",
      "type": "visible",
      "selector": ":text('올바른 생년월일을 입력해 주세요')",
      "description": "생년월일 에러 메시지 확인"
    },
    {
      "action": "screenshot",
      "description": "존재하지 않는 생년월일 에러"
    },
    {
      "action": "fill",
      "selector": "input[placeholder='생년월일']",
      "value": "900101",
      "description": "올바른 생년월일 입력 (1990년생)"
    },
    {
      "action": "fill",
      "selector": "input[aria-label='주민등록번호 뒷자리 첫 번째 숫자']",
      "value": "3",
      "description": "불일치 성별 코드 입력 (2000년대)"
    },
    {
      "action": "blur",
      "selector": "input[aria-label='주민등록번호 뒷자리 첫 번째 숫자']",
      "description": "성별 필드 blur"
    },
    {
      "action": "waitForTimeout",
      "timeout": 500
    },
    {
      "action": "expect",
      "type": "visible",
      "selector": ":text('올바른 주민등록번호 뒷자리를 입력해 주세요')",
      "description": "생년월일-성별 불일치 에러 확인"
    },
    {
      "action": "screenshot",
      "description": "생년월일-성별 불일치 에러"
    }
  ]
}